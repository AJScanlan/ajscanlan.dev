---
const map = {
    note: { 
        label: "Note", 
        border: "border-ink-400 dark:border-ink-600",
        bg: "bg-ink-50 dark:bg-ink-800/40",
        textColor: "text-ink-800 dark:text-ink-100"
    },
    tip: { 
        label: "Tip", 
        border: "border-green dark:border-green",
        bg: "bg-green/5 dark:bg-green/10",
        textColor: "text-ink-800 dark:text-ink-100"
    },
    warn: {
        label: "Warning",
        border: "border-amber dark:border-amber",
        bg: "bg-amber/10 dark:bg-amber/15",
        textColor: "text-ink-900 dark:text-ink-100"
    },
} as const;

type CalloutType = keyof typeof map;

interface CalloutProps {
    type?: CalloutType;
    title?: string;
    icon?: boolean;
}

const { type = "note", title, icon = true } = Astro.props as CalloutProps;

const { label, border, bg, textColor } = map[type];

// Map callout types to ARIA roles
const roleMap = {
    note: "note",
    tip: "complementary", 
    warn: "alert"
} as const;
---
<div
    class={`my-6 rounded-xl border-2 ${border} ${bg} ${textColor} p-rhythm-4`}
    role={roleMap[type]}
    aria-label={title ?? label}
>
    <div class="text-sm font-semibold mb-rhythm-2">{title ?? label}</div>
    <div class="prose prose-sm dark:prose-invert">
        <slot />
    </div>
</div>
