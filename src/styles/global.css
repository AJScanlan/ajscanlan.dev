@tailwind base;
@tailwind components;
@tailwind utilities;


/* ===== BASE LAYER ===== */
/* Canvas + smooth type, prefers-color-scheme respected */
:root {
    color-scheme: light dark;
}

html {
    -webkit-text-size-adjust: 100%;
    font-size: 16px; /* base for rem calculations */
}

body {
    @apply bg-paper-100 text-ink-700 dark:bg-ink-900 dark:text-ink-100 antialiased;
    font-size: 1.125rem;  /* 18px body text */
    line-height: 1.7;
    
    /* Increase line-height on narrow screens */
    @media (max-width: 640px) {
        line-height: 1.75;
    }
}

/* ===== LAYOUT UTILITIES ===== */
/* Content column with rhythm units (4/8/12 px) */
.content-column {
    max-width: 70ch;
    margin-left: auto;
    margin-right: auto;
    padding-left: 1rem;
    padding-right: 1rem;
}

.content-column-narrow {
    max-width: 60ch;
    margin-left: auto;
    margin-right: auto;
    padding-left: 1rem;
    padding-right: 1rem;
}

.content-column-wide {
    max-width: 75ch;
    margin-left: auto;
    margin-right: auto;
    padding-left: 1rem;
    padding-right: 1rem;
}

/* Generous white space utilities */
.prose-spacing > * + * {
    margin-top: 1.25rem;
}

.prose-spacing > h2 {
    margin-top: 2.5rem;
    margin-bottom: 1rem;
}

.prose-spacing > h3 {
    margin-top: 2rem;
    margin-bottom: 0.75rem;
}

/* Never center long text; left-align with rag control */
.prose-text {
    text-align: left;
    hyphens: auto;
    -webkit-hyphens: auto;
}

/* Images bleed to grid edge only on larger breakpoints */
.prose-image {
    margin-left: 0;
    margin-right: 0;
}

@media (min-width: 768px) {
    .prose-image-bleed {
        margin-left: calc(-1 * (100vw - 70ch) / 2);
        margin-right: calc(-1 * (100vw - 70ch) / 2);
        max-width: 100vw;
    }
}

@media (min-width: 768px) {
    .prose-image-bleed {
        margin-left: calc(-1 * (100vw - 70ch) / 2);
        margin-right: calc(-1 * (100vw - 70ch) / 2);
        max-width: 100vw;
    }
}

/* ===== COMPONENT LAYER ===== */
/* Container variants */
.container-narrow {
    @apply container max-w-3xl;
}

.container-wide {
    @apply container max-w-5xl;
}

/* Typography emphasis helpers */
.text-nuance {
    @apply italic font-normal;
}

.text-anchor {
    @apply font-bold not-italic;
}

/* Code sizing: 90-95% of body */
code {
    font-size: 0.95em;
}

pre code {
    font-size: 0.9em;
}

/* ===== UTILITIES LAYER ===== */

/* ===== ACCESSIBILITY ===== */
/* Skip-to-content link */
.skip-to-content {
    position: absolute;
    top: -100px;
    left: 0;
    z-index: 100;
    padding: 0.75rem 1.5rem;
    background-color: #d0342c; /* Fox Red */
    color: white;
    font-weight: 600;
    text-decoration: none;
    border-radius: 0 0 0.5rem 0;
    transition: top 0.2s;
}

.skip-to-content:focus {
    top: 0;
    outline: 3px solid #0b0b0e;
    outline-offset: 2px;
}

/* Enhanced focus styles - visible and consistent */
:focus-visible {
    outline: 3px solid #d0342c; /* Fox Red */
    outline-offset: 2px;
    border-radius: 2px;
}

/* Remove default outline but keep focus-visible */
:focus:not(:focus-visible) {
    outline: none;
}

/* Specific focus styles for interactive elements */
a:focus-visible,
button:focus-visible {
    outline: 3px solid #d0342c;
    outline-offset: 2px;
}

/* Focus styles for inputs */
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
    outline: 3px solid #d0342c;
    outline-offset: 0;
    border-color: #d0342c;
}

/* High contrast focus for dark mode */
.dark :focus-visible {
    outline-color: #f87171; /* Lighter fox for dark backgrounds */
}

/* Respect user's motion preferences */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
    
    .skip-to-content {
        transition: none;
    }
}

/* Anchor link icon spacing (rehype-autolink-headings) */
.heading-anchor {
    @apply no-underline;
}

.heading-anchor>span {
    @apply align-middle;
}